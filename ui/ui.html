<!doctype html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="utf-8" />
  <title>ğŸ½ï¸ Ú†Øªâ€ŒØ¨Ø§Øª Ø±Ø³ØªÙˆØ±Ø§Ù†ÛŒ (RAG)</title>
  <style>
    body { font-family: sans-serif; max-width: 800px; margin: 32px auto; padding: 0 16px; }
    textarea, input { width: 100%; font-size: 16px; }
    .box { border: 1px solid #ddd; border-radius: 12px; padding: 16px; margin: 12px 0; }
    button { padding: 10px 16px; border-radius: 10px; border: 1px solid #ccc; cursor: pointer; }
    .row { display: flex; gap: 12px; align-items: center; }
    .row input { flex: 1; }
    .muted { color: #666; font-size: 14px; }
  </style>
</head>
<body>
  <h2>ğŸ½ï¸ Ú†Øªâ€ŒØ¨Ø§Øª Ø±Ø³ØªÙˆØ±Ø§Ù†ÛŒ (RAG)</h2>
  <div class="box">
    <label>Ø³Ø¤Ø§Ù„ Ø´Ù…Ø§ Ø¯Ø±Ø¨Ø§Ø±Ù‡Ù” Ù…Ù†Ùˆ</label>
    <input id="q" placeholder="Ù…Ø«Ù„Ø§Ù‹: ØºØ°Ø§ÛŒ Ø¨Ø¯ÙˆÙ† Ú¯Ù„ÙˆØªÙ† Ø¯Ø§Ø±ÛŒØ¯ØŸ">
    <div style="margin-top:10px">
      <button onclick="ask()">Ø¨Ù¾Ø±Ø³</button>
    </div>
  </div>

  <div class="box">
    <h3>Ù¾Ø§Ø³Ø®</h3>
    <div id="answer" class="muted">â€”</div>
  </div>

  <div class="box">
    <h3>Context</h3>
    <pre id="ctx" class="muted" style="white-space:pre-wrap">â€”</pre>
  </div>

  <script>
    const API = "http://localhost:8000";
    async function ask() {
      const q = document.getElementById('q').value.trim();
      if (!q) return;
      document.getElementById('answer').textContent = "Ø¯Ø± Ø­Ø§Ù„ Ù¾Ø±Ø³â€ŒÙˆØ¬Ùˆ...";
      document.getElementById('ctx').textContent = "";
      try {
        const r = await fetch(`${API}/ask`, {
          method: "POST",
          headers: {"Content-Type": "application/json"},
          body: JSON.stringify({query: q})
        });
        const j = await r.json();
        document.getElementById('answer').textContent = j.answer || "(Ù¾Ø§Ø³Ø®ÛŒ Ø¯Ø±ÛŒØ§ÙØª Ù†Ø´Ø¯)";
        document.getElementById('ctx').textContent = j.context || "";
      } catch (e) {
        document.getElementById('answer').textContent = "Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ API";
        console.error(e);
      }
    }
  </script>
</body>
</html>
